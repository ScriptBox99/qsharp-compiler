#pragma once
// Copyright (c) Microsoft Corporation.
// Licensed under the MIT License.

#include "Llvm.hpp"

namespace microsoft {
namespace quantum {

class {name}Analytics : public llvm::AnalysisInfoMixin<{name}Analytics>
{
public:
  using Result = llvm::StringMap<unsigned>; ///< Change the type of the collected date here

  /// Constructors and destructors
  /// @{
  {name}Analytics()                         = default;
  {name}Analytics({name}Analytics const &)  = delete;
  {name}Analytics({name}Analytics &&)       = default;
  ~{name}Analytics()                        = default;
  /// @}

  /// Operators
  /// @{
  {name}Analytics &operator=({name}Analytics const &) = delete;
  {name}Analytics &operator=({name}Analytics &&) = delete;
  /// @}

  /// Functions required by LLVM
  /// @{
  Result run(llvm::Function & function, llvm::FunctionAnalysisManager & /*unused*/);
  /// @}

private:
  static llvm::AnalysisKey Key;  // NOLINT
  friend struct llvm::AnalysisInfoMixin<{name}Analytics>;
};

class {name}Pass : public llvm::PassInfoMixin<{name}Pass>
{
public:
  /// Constructors and destructors
  /// @{
  {name}Pass()                       = default;
  {name}Pass({name}Pass const &)     = delete;
  {name}Pass({name}Pass &&)          = default;
  ~{name}Pass()                      = default;
  /// @}

  /// Operators
  /// @{
  {name}Pass &operator=({name}Pass const &) = delete;
  {name}Pass &operator=({name}Pass &&) = delete;
  /// @}

  /// Functions required by LLVM
  /// @{
  llvm::PreservedAnalyses run(llvm::Function & function, llvm::FunctionAnalysisManager & fam);
  static bool             isRequired();
  /// @}
};

}  // namespace quantum
}  // namespace microsoft
